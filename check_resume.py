#!/usr/bin/env python
import os
import sys

import django

os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'sudocodelab.settings')
sys.path.insert(0, '/'.join(os.path.dirname(__file__).split('\\')))
django.setup()

from sudocodelabapp.models import JobApplication

try:
    app = JobApplication.objects.get(pk=2)
    print(f"Applicant: {app.name}")
    print(f"Has resume: {bool(app.resume)}")
    if app.resume:
        print(f"Resume name: {app.resume.name}")
        print(f"Resume exists: {os.path.exists(app.resume.path)}")
        import os.path
        print(f"Resume size: {os.path.getsize(app.resume.path)} bytes")
except JobApplication.DoesNotExist:
    print("Applicant 2 not found")
except Exception as e:
    print(f"Error: {e}")
